<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Checkout</title>
      <link rel="icon" href="/images/icon.jpg">
      <link rel="stylesheet" href="/css/style.css">
      <script src="../js/checkout.js" type="module"></script>
  </head>
  <body>
      <header class="divider" id="main-header"></header>
        <nav>
            <div class="bar-container" onclick="myFunction(this)">
                <div class="bar1"></div>
                <div class="bar2"></div>
                <div class="bar3"></div>
            </div>
        <div id="myDropdown" class="dropdown-content">
                <a href="/index.html">Portfolio</a>
                <a href="/shop/index.html">Shop</a>
                <a href="/aboutme/index.html">About Me</a>
                <a href="/contactme/index.html">Contact Me</a>
            </div>
            <script>
                function myFunction(x) {
                    x.classList.toggle("change");
                    const dropdown = document.getElementById("myDropdown");
                    dropdown.classList.toggle("show");
                }
            </script>
        </nav>
      <main>
        <div id="checkout"></div>
        <script>
          document.addEventListener("DOMContentLoaded", () => {
            const artwork = JSON.parse(localStorage.getItem("checkoutArtwork"));
            const checkoutDiv = document.getElementById("checkout");

            if (!checkoutDiv) {
              console.error("checkout container not found");
              return;
            }

            if (!artwork) {
              checkoutDiv.innerHTML = "<p>No selection found. Please go back and choose a print.</p>";
              return;
            }

            checkoutDiv.innerHTML = `
              <h2>Checkout</h2>
              <img src="${artwork.image}" alt="${artwork.name}" style="max-width:200px;">
              <p><strong>Artwork:</strong> ${artwork.name}</p>
              <p><strong>Details:</strong> ${artwork.date}, ${artwork.medium}, ${artwork.size}</p>
              <p><strong>Selected Print:</strong> ${artwork.selectedPrint.size} - ${artwork.selectedPrint.price}</p>

              <form id="checkoutForm">
                <label>Name: <input type="text" name="name" required></label><br>
                <label>Email: <input type="email" name="email" required></label><br>
                <button type="submit">Complete Purchase</button>
              </form>
            `;

            document.getElementById("checkoutForm").addEventListener("submit", (e) => {
              e.preventDefault();
              window.location.href = "success.html";
            });
          });
        </script>

        <div id="checkout"></div>
      </main>
      
      <footer id="main-footer"></footer>
  </body>

</html>